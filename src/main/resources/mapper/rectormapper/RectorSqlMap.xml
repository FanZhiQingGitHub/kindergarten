<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.great.kindergarten.director.mapper.RectorMapper">
    <!--    com.great.kindergarten.director.javabean.-->
    <!--resultType先是传入的，parameterType是传-一样的话，其实是可以不用写的-->
    <resultMap id="rectorMap" type="TblRector">
        <result column="rectorid" property="rectorid"></result>
        <result column="rectorname" property="rectorname"></result>
        <result column="rectorpwd" property="rectorpwd"></result>
        <result column="rectorsex" property="rectorsex"></result>
        <result column="rectorage" property="rectorage"></result>
        <result column="rectoradd" property="rectoradd"></result>
        <result column="rectorphone" property="rectorphone"></result>
        <result column="rectorregtime" property="rectorregtime"></result>
        <result column="rectorstatus" property="rectorstatus"></result>
        <result column="rid" property="rid"></result>
    </resultMap>

    <resultMap id="reTeacher" type="com.great.kindergarten.commons.entity.TblTeacher">
        <result column="teacherid" property="teacherid"/>
        <result column="teachername" property="teachername"/>
        <result column="teacherpwd" property="teacherpwd"/>
        <result column="teachersex" property="teachersex"/>
        <result column="teacherage" property="teacherage"/>
        <result column="teacheradd" property="teacheradd"/>
        <result column="teacherphone" property="teacherphone"/>
        <result column="teacherjob" property="teacherjob"/>
        <result column="teacherregtime" property="teacherregtime"/>
        <result column="teacherstatus" property="teacherstatus"/>
        <result column="cid" property="cid"/>
        <result column="rid" property="rid"/>
    </resultMap>

    <!--园长登录查询-->
    <select id="findRector" resultMap="rectorMap" parameterType="TblRector">
		select * from tbl_rector where rectorname=#{rectorname} and rectorpwd = #{rectorpwd};
	</select>

    <!--园长判断密码 -->
    <select id="selectoldPwd" resultMap="rectorMap" parameterType="TblRector">
		select * from tbl_rector where rectorpwd = #{rectorpwd} and rectorid = #{rectorid}
	</select>
    <!--更新密码-->
    <update id="updateByIdPwd" parameterType="TblRector">
        update tbl_rector set rectorpwd = #{rectorpwd} where rectorid = #{rectorid}
    </update>

    <!--    教师模块设计-->
    <select id="findTeacherAll" resultMap="reTeacher" parameterType="java.util.HashMap">
        select * from tbl_teacher
        <where>1=1
            <if test="teachername != null and teachername != ''">
                and teachername like "%"#{teachername}"%"
            </if>
        </where>
        order by teacherid limit #{pageInt},#{limitInt}
    </select>
    <!--    教师搜索界面的设计,查询记录条数-->
    <select id="findTeacherAllCount" resultType="java.lang.Long" parameterType="java.util.HashMap">
        select count(*) from tbl_teacher
        <where>1=1
            <if test="teachername != null and teachername != ''">
                and teachername like "%"#{teachername}"%"
            </if>
        </where>
    </select>

    <!--    对应的教师表格信息的删除-->
    <delete id="delTeacherTable" parameterType="int">
        delete from tbl_teacher
        where teacherid = #{teacherid}
    </delete>

    <!--对应的教师表格信息....更新语句信息-->
    <update id="updateTeacherById" parameterType="TblTeacher">
        update tbl_teacher
        set  teachername = #{teachername}
            ,teacherjob = #{teacherjob}
        where teacherid = #{teacherid}
    </update>

    <!--对应的进行教师的新增-->
    <insert id="addTeacherForm" parameterType="TblTeacher">
		insert into tbl_teacher(
			 teachername
			,teacherjob
		)values(
			 #{teachername}
			,#{teacherjob}
		)
	</insert>

</mapper>