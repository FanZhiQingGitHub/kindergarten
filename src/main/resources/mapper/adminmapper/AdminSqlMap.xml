<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.great.kindergarten.admin.mapper.AdminMapper">

    <resultMap id="AdminMap" type="com.great.kindergarten.commons.entity.TblAdmin">
        <result column="adminid" property="adminid"/>
        <result column="adminname" property="adminname"/>
        <result column="adminpwd" property="adminpwd"/>
        <result column="createtime" property="createtime"/>
        <result column="adminstatus" property="adminstatus"/>
        <result column="rid" property="rid"/>
    </resultMap>
    <insert id="addKinder" parameterType="java.util.List">
        insert into
        tbl_kinder(kindername,kinderregtime,kinderstatus,kinderacount,kindercode)
        values
        <foreach collection="list" item="i" index="index" separator=",">
            (#{i.kindername},#{i.kinderregtime},#{i.kinderstatus},#{i.kinderacount},#{i.kindercode})
        </foreach>
    </insert>
    <insert id="addMenuInfo">
        insert into
        tbl_menu(menuname,menuurl,menusonid,sort)
        values (#{menuname},#{menuurl},#{menusonid},#{sort})
    </insert>
    <insert id="addRoleInfo">
        insert into
            tbl_role(rolename) values (#{rolename})
    </insert>
    <insert id="addPhotoImg">
        insert into
           tbl_readmag(readmagname, readmagurl, readmagdetail, readmagtime, readmagpage, photourl)
           values (#{readmagname},#{readmagurl},#{readmagdetail},#{readmagtime},#{readmagpage},#{photourl})
    </insert>
    <insert id="addPlatFormInfo">
        insert into
            tbl_platforminfo(platforminfoname, platforminfotime, platforminfodetail, platforminfostatus)
            values (#{platforminfoname},#{platforminfotime},#{platforminfodetail},#{platforminfostatus})
    </insert>
    <insert id="addRector">
        insert into
            tbl_rector(rectorname, rectorpwd, rectorsex, rectorage, rectoradd, rectorphone, rectorregtime, rectorstatus, rid)
            values
            <foreach collection="list" item="i" index="index" separator=",">
                (#{i.rectorname},#{i.rectorpwd},#{i.rectorsex},#{i.rectorage},#{i.rectoradd},#{i.rectorphone},#{i.rectorregtime},#{i.rectorstatus},#{i.rid})
            </foreach>
    </insert>


    <delete id="deleteKinderInfo">
        delete from tbl_kinder where kinderid = #{kinderid}
    </delete>
    <delete id="deleteMenuInfo">
        delete from tbl_menu where menuid = #{menuid}
    </delete>
    <delete id="deleteRoleMenu">
        delete from tbl_rolemenu where rolemenuid = #{rolemenuid}
    </delete>
    <delete id="deleteRoleInfo">
        delete from tbl_role where roleid = #{roleid}
    </delete>
    <delete id="deleteReadInfo">
         delete from tbl_readmag where readmagid = #{readmagid}
    </delete>
    <delete id="deletePlatFormInfo">
        delete from tbl_platforminfo where platforminfoid = #{platforminfoid}
    </delete>
    <delete id="deleteRector">
        delete from tbl_rector where rectorid = #{rectorid}
    </delete>

    <!--    用户状态查询-->
    <select id="findAdminStatus" resultType="java.lang.String" parameterType="java.util.Map">
        select adminstatus from tbl_admin
        <where>
            <if test="adminname != '' and adminname != null ">
                and adminname = #{adminname}
            </if>
        </where>
    </select>

    <!--    用户登录-->
    <select id="adminLogin" resultMap="AdminMap" parameterType="java.util.Map">
        select * from tbl_admin
        <where>
            <if test="adminname != '' and adminname != null ">
                and adminname = #{adminname}
            </if>
            <if test="adminpwd != '' and adminpwd != null ">
                and adminpwd = #{adminpwd}
            </if>
        </where>
    </select>

    <select id="findMenuByName" resultType="com.great.kindergarten.commons.entity.TblMenu" parameterType="java.lang.String">
		select *
		from tbl_menu
		where menuid in (
			select mid
			from tbl_rolemenu R1
			where R1.rid in
				  (select R.roleid
				   from tbl_role R
							left join tbl_admin A on R.roleid = A.rid
				   where A.adminname = #{adminname} and menusonid = 0)
		)
	</select>

    <select id="findMenuBySid" resultType="com.great.kindergarten.commons.entity.TblMenu" parameterType="java.lang.Integer">
        select * from tbl_menu a, tbl_rolemenu b where a.menusonid = #{menusonid} and a.menuid = b.mid
    </select>

    <select id="findRoleByRid" resultType="java.lang.String">
        select rolename from tbl_role where roleid = #{roleid}
    </select>
    <select id="findAdminByName" resultType="com.great.kindergarten.commons.entity.TblAdmin">
        select * from tbl_admin where adminname = #{adminname}
    </select>

    <select id="findTblAdminByName" resultType="com.great.kindergarten.commons.entity.TblAdmin">
        select * from tbl_admin where adminname = #{adminname}
    </select>

    <update id="updateAdminPwd" parameterType="java.util.Map">
        update tbl_admin set adminpwd = #{adminpwd} where adminid = #{adminid};
    </update>
    <update id="checkQualify">
        update tbl_kinder
        <set>
            <if test="kinderstatus != '' and kinderstatus != null">
                kinderstatus = #{kinderstatus},
            </if>
            <if test="kinderapptime != '' and kinderapptime != null">
                kinderapptime = #{kinderapptime},
            </if>
        </set>
        where kinderid = #{kinderid}
    </update>
    <update id="updateKinderCode">
        update tbl_kinder
        <set>
            <if test="kindercode != '' and kindercode != null">
                kindercode = #{kindercode},
            </if>
        </set>
        where kinderid = #{kinderid}
    </update>
    <update id="restKinderPwd">
        update tbl_kinder
        <set>
            <if test="kinderpwd != '' and kinderpwd != null">
                kinderpwd = #{kinderpwd},
            </if>
        </set>
        where kinderid = #{kinderid}
    </update>
    <update id="updateKinderInfo">
        update tbl_kinder
        <set>
            <if test="kindername != '' and kindername != null">
                kindername = #{kindername},
            </if>
            <if test="kinderacount != '' and kinderacount != null">
                kinderacount = #{kinderacount},
            </if>
            <if test="kinderlp != '' and kinderlp != null">
                kinderlp = #{kinderlp},
            </if>
            <if test="kinderlpid != '' and kinderlpid != null">
                kinderlpid = #{kinderlpid},
            </if>
            <if test="kinderlpadd != '' and kinderlpadd != null">
                kinderlpadd = #{kinderlpadd},
            </if>
            <if test="kinderlpphone != '' and kinderlpphone != null">
                kinderlpphone = #{kinderlpphone},
            </if>
        </set>
        where kinderid = #{kinderid}
    </update>
    <update id="updateMenuInfo">
        update tbl_menu
        <set>
            <if test="menuname != '' and menuname != null">
                menuname = #{menuname},
            </if>
            <if test="menusonid != '' and menusonid != null">
                menusonid = #{menusonid},
            </if>
            <if test="menuurl != '' and menuurl != null">
                menuurl = #{menuurl},
            </if>
            <if test="sort != '' and sort != null">
                sort = #{sort},
            </if>
        </set>
        where menuid = #{menuid}
    </update>
    <update id="updateRoleInfo">
        update tbl_role
        <set>
            <if test="rolename != '' and rolename != null">
                rolename = #{rolename},
            </if>
        </set>
        where roleid = #{roleid}
    </update>
    <update id="reUploadBook">
        update tbl_readmag
        <set>
            <if test="readmagname != '' and readmagname != null">
                readmagname = #{readmagname},
            </if>
            <if test="readmagurl != '' and readmagurl != null">
                readmagurl = #{readmagurl},
            </if>
            <if test="readmagdetail != '' and readmagdetail != null">
                readmagdetail = #{readmagdetail},
            </if>
                readmagtime = now(),
            <if test="readmagpage != '' and readmagpage != null">
                readmagpage = #{readmagpage},
            </if>
            <if test="photourl != '' and photourl != null">
                photourl = #{photourl},
            </if>
        </set>
        where readmagid = #{readmagid}
    </update>
    <update id="releasePlatFormInfo">
        update tbl_platforminfo
        <set>
            <if test="platforminfostatus != '' and platforminfostatus != null">
                platforminfostatus = #{platforminfostatus},
            </if>
        </set>
        where platforminfoid = #{platforminfoid}
    </update>

    <update id="cancelPlatFormInfo">
        update tbl_platforminfo
        <set>
            <if test="platforminfostatus != '' and platforminfostatus != null">
                platforminfostatus = #{platforminfostatus},
            </if>
        </set>
        where platforminfoid = #{platforminfoid}
    </update>
    <update id="updatePlatFormInfo">
        update tbl_platforminfo
        <set>
            <if test="platforminfoname != '' and platforminfoname != null">
                platforminfoname = #{platforminfoname},
            </if>
            <if test="platforminfodetail != '' and platforminfodetail != null">
                platforminfodetail = #{platforminfodetail},
            </if>
            platforminfotime = now()
        </set>
        where platforminfoid = #{platforminfoid}
    </update>
    <update id="restRectorPwd">
        update tbl_rector
        <set>
            <if test="rectorpwd != '' and rectorpwd != null">
                rectorpwd = #{rectorpwd},
            </if>
        </set>
        where rectorid = #{rectorid}
    </update>
    <update id="updateRector">
        update tbl_rector
        <set>
            <if test="rectorpwd != '' and rectorpwd != null">
                rectorpwd = #{rectorpwd},
            </if>
            <if test="rectorphone != '' and rectorphone != null">
                rectorphone = #{rectorphone},
            </if>
            <if test="rectoradd != '' and rectoradd != null">
                rectoradd = #{rectoradd},
            </if>
            <if test="rectorstatus != '' and rectorstatus != null">
                rectorstatus = #{rectorstatus},
            </if>
            <if test="rectorage != '' and rectorage != null">
                rectorage = #{rectorage},
            </if>
        </set>
        where rectorid = #{rectorid}
    </update>
    <update id="updateRectorStatus">
         update tbl_rector
        <set>
            <if test="rectorstatus != '' and rectorstatus != null">
                rectorstatus = #{rectorstatus},
            </if>
        </set>
        where rectorid = #{rectorid}
    </update>

    <select id="findAllKinder" resultType="com.great.kindergarten.commons.entity.TblKinder">
        select * from tbl_kinder
        <where>
            <if test=" time1 != '' and time1 != null">
                <![CDATA[   and DATE_FORMAT(kinderregtime, '%Y-%m-%d')>=  DATE_FORMAT(#{time1}, '%Y-%m-%d')   ]]>
            </if>
            <if test=" time2 != '' and time2 != null">
                <![CDATA[   and DATE_FORMAT(kinderregtime, '%Y-%m-%d')<=  DATE_FORMAT(#{time2}, '%Y-%m-%d')   ]]>
            </if>
            <if test=" kindername != '' and kindername != null">
                and kindername like concat('%',#{kindername},'%')
            </if>
            <if test=" kinderstatus != '' and kinderstatus != null and kinderstatus !='请选择'">
                and kinderstatus = #{kinderstatus}
            </if>
            <if test=" kindercode != '' and  kindercode != null and kindercode !='请选择'">
                and kindercode = #{kindercode}
            </if>
        </where>
        order by kinderregtime desc
    </select>

    <select id="findAllCount" resultType="java.lang.Integer">
        select count(*) from tbl_kinder
        <where>
            <if test="time1!= '' and time1 != null">
                <![CDATA[   and DATE_FORMAT(kinderregtime, '%Y-%m-%d')>=  DATE_FORMAT(#{time1}, '%Y-%m-%d')   ]]>
            </if>
            <if test="time2!= '' and time2 != null">
                <![CDATA[   and DATE_FORMAT(kinderregtime, '%Y-%m-%d')<=  DATE_FORMAT(#{time2}, '%Y-%m-%d')   ]]>
            </if>
            <if test=" kindername != '' and kindername != null">
                and kindername like concat('%',#{kindername},'%')
            </if>
            <if test=" kinderstatus != '' and  kinderstatus != null and kinderstatus !='请选择'">
                and kinderstatus = #{kinderstatus}
            </if>
            <if test=" kindercode != '' and  kindercode != null and kindercode !='请选择'">
                and kindercode = #{kindercode}
            </if>
        </where>
    </select>

    <select id="findTblKinderById" resultType="com.great.kindergarten.commons.entity.TblKinder">
        select * from tbl_kinder where kinderid = #{kinderid}
    </select>

    <select id="findKinder" resultType="com.great.kindergarten.commons.entity.TblKinder">
        select * from tbl_kinder
    </select>

    <select id="findAccountByName" resultType="java.lang.String">
        select kinderacount from tbl_kinder where kindername = #{kindername}
    </select>

    <select id="initialPwd" resultType="java.lang.String">
        select parameterval from tbl_parameter where parametername = #{parametername}
    </select>

    <select id="findAllParameter" resultType="com.great.kindergarten.commons.entity.TblParameter">
        select * from tbl_kinder
        <where>
            <if test=" parametername != '' and parametername != null">
                and parametername like concat('%',#{parametername},'%')
            </if>
            <if test=" parametertype != '' and parametertype != null and parametertype !='请选择'">
                and kinderstatus = #{kinderstatus}
            </if>
        </where>
        order by parametertype
    </select>
    <select id="findParameterCount" resultType="java.lang.Integer">
        select count(*) from tbl_parameter
        <where>
            <if test=" parametername != '' and parametername != null">
                and parametername like concat('%',#{parametername},'%')
            </if>
            <if test=" parametertype != '' and parametertype != null and parametertype !='请选择'">
                and kinderstatus = #{kinderstatus}
            </if>
        </where>
        order by parametertype
    </select>
    <select id="findParameterInfo" resultType="com.great.kindergarten.commons.entity.TblParameter">
        select * from tbl_parameter;
    </select>
    <select id="findStairMenu" resultType="com.great.kindergarten.commons.entity.TblMenu">
        select * from tbl_menu where menusonid = 0
    </select>

    <select id="findAllMenu" resultType="com.great.kindergarten.commons.entity.TblMenu">
        select * from tbl_menu
        <where>
            <if test=" mName != '' and mName != null">
                and menuname like concat('%',#{mName},'%')
            </if>
            <if test=" pName != '' and pName != null and pName !='请选择'">
                and menuname = #{pName}
            </if>
        </where>
        order by menuname asc
    </select>

    <select id="findMenuCount" resultType="java.lang.Integer">
        select count(*) from tbl_menu
        <where>
            <if test=" mName != '' and mName != null">
                and menuname like concat('%',#{mName},'%')
            </if>
            <if test=" pName != '' and pName != null and pName !='请选择'">
                and menuname = #{pName}
            </if>
        </where>
        order by menuname asc
    </select>


    <select id="findSuperierMenu" resultType="java.lang.String">
        select menuname from tbl_menu where menuid in (
            select menusonid from tbl_menu where menuid = #{menuid}
        )
    </select>
    <select id="findSidByName" resultType="java.lang.Integer">
        select menuid from tbl_menu where menuname = #{menuname}
    </select>
    <select id="findRoleMenuIdByMid" resultType="java.lang.Integer">
        select rolemenuid from tbl_rolemenu where mid = #{mid}
    </select>
    <select id="findSidByMid" resultType="java.lang.Integer">
        select menusonid from tbl_menu where menuid = #{menuid}
    </select>

    <select id="findAllRoleInfo" resultType="com.great.kindergarten.commons.entity.TblRole">
        select * from tbl_role
        <where>
            <if test="rolename != '' and rolename != null and rolename != '请选择'">
                and rolename = #{rolename}
            </if>
        </where>
    </select>

    <select id="findRoleCount" resultType="java.lang.Integer">
        select count(*) from tbl_role
        <where>
            <if test="rolename != '' and rolename != null and rolename != '请选择'">
                and rolename = #{rolename}
            </if>
        </where>
    </select>
    <select id="findAllRoleName" resultType="com.great.kindergarten.commons.entity.TblRole">
        select * from tbl_role
    </select>
    <select id="findRoleMenuIdByRid" resultType="com.great.kindergarten.commons.entity.TblRoleMenu">
        select t2.rolemenuid from tbl_role t1,tbl_rolemenu t2 where t1.roleid = t2.rid
    </select>
    <select id="checkRoleName" resultType="java.lang.Integer">
        select roleid from tbl_role where rolename = #{rolename}
    </select>
    <select id="checkMenuName" resultType="java.lang.Integer">
        select menuid from tbl_menu where menuname = #{menuname}
    </select>
    <select id="findAllReadInfo" resultType="com.great.kindergarten.commons.entity.TblReadmag">
        select * from tbl_readmag
        <where>
            <if test=" time1 != '' and time1 != null">
                <![CDATA[   and DATE_FORMAT(readmagtime, '%Y-%m-%d')>=  DATE_FORMAT(#{time1}, '%Y-%m-%d')   ]]>
            </if>
            <if test=" time2 != '' and time2 != null">
                <![CDATA[   and DATE_FORMAT(readmagtime, '%Y-%m-%d')<=  DATE_FORMAT(#{time2}, '%Y-%m-%d')   ]]>
            </if>
            <if test=" readmagname != '' and readmagname != null">
                and readmagname like concat('%',#{readmagname},'%')
            </if>
        </where>
        order by readmagtime desc
    </select>
    <select id="findReadCount" resultType="java.lang.Integer">
        select count(*) from tbl_readmag
        <where>
            <if test=" time1 != '' and time1 != null">
                <![CDATA[   and DATE_FORMAT(readmagtime, '%Y-%m-%d')>=  DATE_FORMAT(#{time1}, '%Y-%m-%d')   ]]>
            </if>
            <if test=" time2 != '' and time2 != null">
                <![CDATA[   and DATE_FORMAT(readmagtime, '%Y-%m-%d')<=  DATE_FORMAT(#{time2}, '%Y-%m-%d')   ]]>
            </if>
            <if test=" readmagname != '' and readmagname != null">
                and readmagname like concat('%',#{readmagname},'%')
            </if>
        </where>
    </select>
    <select id="findRoleInfo" resultType="com.great.kindergarten.commons.entity.TblRole">
        select roleid, rolename from tbl_role where rolename like '%管理员%';
    </select>
    <select id="findMenuByRid" resultType="com.great.kindergarten.commons.entity.TblMenu">
        select *
		from tbl_menu
		where menuid in (
			select mid
			from tbl_rolemenu R1
			where R1.rid in
				  (select R.roleid
				   from tbl_role R
							left join tbl_admin A on R.roleid = A.rid
				   where R.roleid = #{roleid} and menusonid = 0)
				   )
    </select>
    <select id="findAllPlatFormInfo" resultType="com.great.kindergarten.commons.entity.TblPlatforminfo">
        select * from tbl_platforminfo
        <where>
            <if test=" time1 != '' and time1 != null">
                <![CDATA[   and DATE_FORMAT(platforminfotime, '%Y-%m-%d')>=  DATE_FORMAT(#{time1}, '%Y-%m-%d')   ]]>
            </if>
            <if test=" time2 != '' and time2 != null">
                <![CDATA[   and DATE_FORMAT(platforminfo, '%Y-%m-%d')<=  DATE_FORMAT(#{time2}, '%Y-%m-%d')   ]]>
            </if>
            <if test=" platforminfoname != '' and platforminfoname != null">
                and platforminfo like concat('%',#{platforminfo},'%')
            </if>
        </where>
        order by platforminfotime asc
    </select>
    <select id="findPlatFormInfoCount" resultType="java.lang.Integer">
        select count(*) from tbl_platforminfo
        <where>
            <if test=" time1 != '' and time1 != null">
                <![CDATA[   and DATE_FORMAT(platforminfotime, '%Y-%m-%d')>=  DATE_FORMAT(#{time1}, '%Y-%m-%d')   ]]>
            </if>
            <if test=" time2 != '' and time2 != null">
                <![CDATA[   and DATE_FORMAT(platforminfo, '%Y-%m-%d')<=  DATE_FORMAT(#{time2}, '%Y-%m-%d')   ]]>
            </if>
            <if test=" platforminfoname != '' and platforminfoname != null">
                and platforminfo like concat('%',#{platforminfo},'%')
            </if>
        </where>
        order by platforminfotime asc
    </select>
    <select id="findAllRectorInfo" resultType="com.great.kindergarten.commons.entity.TblRector">
        select * from tbl_rector
        <where>
            <if test=" time1 != '' and time1 != null">
                <![CDATA[   and DATE_FORMAT(rectorregtime, '%Y-%m-%d')>=  DATE_FORMAT(#{time1}, '%Y-%m-%d')   ]]>
            </if>
            <if test=" time2 != '' and time2 != null">
                <![CDATA[   and DATE_FORMAT(rectorregtime, '%Y-%m-%d')<=  DATE_FORMAT(#{time2}, '%Y-%m-%d')   ]]>
            </if>
            <if test=" rectorname != '' and rectorname != null ">
                and rectorname like concat('%',#{rectorname},'%')
            </if>
            <if test=" rectorstatus != '' and rectorstatus != null and rectorstatus != '请选择'">
                and rectorstatus = #{rectorstatus}
            </if>
        </where>
        order by rectorregtime desc
    </select>
    <select id="findRectorInfoCount" resultType="java.lang.Integer">
        select count(*) from tbl_rector
        <where>
            <if test=" time1 != '' and time1 != null">
                <![CDATA[   and DATE_FORMAT(rectorregtime, '%Y-%m-%d')>=  DATE_FORMAT(#{time1}, '%Y-%m-%d')   ]]>
            </if>
            <if test=" time2 != '' and time2 != null">
                <![CDATA[   and DATE_FORMAT(rectorregtime, '%Y-%m-%d')<=  DATE_FORMAT(#{time2}, '%Y-%m-%d')   ]]>
            </if>
            <if test=" rectorname != '' and rectorname != null">
                and rectorname like concat('%',#{rectorname},'%')
            </if>
            <if test=" rectorstatus != '' and rectorstatus != null and rectorstatus != '请选择'">
                and rectorstatus = #{rectorstatus}
            </if>
        </where>
        order by rectorregtime desc
    </select>


    <!--    &lt;!&ndash;    查找用户类型&ndash;&gt;-->
<!--    <select id="findUserType" parameterType="java.lang.String" resultMap="userMap">-->
<!--                select r.roleid,r.rolename from usertable u join roletable r on(u.roleid = r.roleid)-->
<!--                where u.username = #{username}-->
<!--            </select>-->

<!--    &lt;!&ndash;    这边这个type是你需要查询返回的对象，id就是select语句的 resultMap&ndash;&gt;-->
<!--    <resultMap id="userMap" type="RoleTable">-->
<!--        &lt;!&ndash;   这边填写的是你需要查询的的结果&ndash;&gt;-->
<!--        <result property="roleid" column="roleid"/>-->
<!--        <result property="rolename" column="rolename"/>-->
<!--        &lt;!&ndash;    需要的条件，即where 后面的条件（属于那个实体对象，下面的property就填哪个，column就是实体对象对应数据库表的字段名，-->
<!--        javaType就是查询条件的实体类）&ndash;&gt;-->
<!--        <association property="userTable" column="roleid" javaType="UserTable">-->
<!--            &lt;!&ndash;    根据哪个字段去查&ndash;&gt;-->
<!--            <result property="username" column="username"/>-->
<!--        </association>-->
<!--    </resultMap>-->

<!--    &lt;!&ndash;select * from menutable where menuid in (select r2.mid from roletable r1, rolemenutable r2 where r1.roleid = r2.rid and r1.roleid = #{roleid}) and menusonid = 0&ndash;&gt;-->

<!--    &lt;!&ndash;    查找用户对应的父菜单&ndash;&gt;-->
<!--    <select id="findMenuIDByName" parameterType="java.lang.Integer" resultType="MenuTable">-->
<!--        select m.menuid,m.menuname,m.menuurl,m.menusonid,r2.roleid from menutable m,rolemenutable r1,roletable r2 where m.menuid = r1.mid and r1.rid = r2.roleid and r2.roleid = #{roleid} and menusonid = 0;-->
<!--    </select>-->

<!--    &lt;!&ndash;    查找用户对应的子菜单&ndash;&gt;-->
<!--    <select id="findMenuNameByID" parameterType="com.example.papersmagboot.javabean.MenuTable" resultType="MenuTable">-->
<!--        select * from menutable m,rolemenutable r  where  m.menuid = r.mid and   m.menusonid = #{menuid} and r.rid = #{roleid} order by menuid-->
<!--    </select>-->

<!--    &lt;!&ndash;    查找角色信息&ndash;&gt;-->
<!--    <select id="findRoleInfo" resultType="com.example.papersmagboot.javabean.RoleTable"-->
<!--            parameterType="com.example.papersmagboot.javabean.MenuPage">-->
<!--        select * from roletable-->
<!--        <where>-->
<!--            <if test="roleName != '' and roleName != null ">-->
<!--                and rolename like CONCAT('%',#{roleName},'%')-->
<!--            </if>-->
<!--        </where>-->
<!--    </select>-->

<!--    &lt;!&ndash;    查找角色信息总条数&ndash;&gt;-->
<!--    <select id="findRoleInfoCount" resultType="java.lang.Long"-->
<!--            parameterType="com.example.papersmagboot.javabean.MenuPage">-->
<!--        select count(*) from roletable-->
<!--        <where>-->
<!--            <if test="roleName != '' and roleName != null ">-->
<!--                and rolename like CONCAT('%',#{roleName},'%')-->
<!--            </if>-->
<!--        </where>-->
<!--    </select>-->


<!--    &lt;!&ndash;    用户管理信息表&ndash;&gt;-->
<!--    <select id="findALLUser" resultMap="UserMap" parameterType="com.example.papersmagboot.javabean.UserPage">-->
<!--        select * from usertable-->
<!--        <where>-->
<!--            <if test="uName != '' and uName != null ">-->
<!--                and username like CONCAT('%',#{uName},'%')-->
<!--            </if>-->
<!--            <if test="uSex != '' and uSex != null ">-->
<!--                and usersex = #{uSex}-->
<!--            </if>-->
<!--            <if test="uStatus != '' and uStatus != null ">-->
<!--                and userstatus = #{uStatus}-->
<!--            </if>-->
<!--            <if test="uTime1 != '' and uTime1 != null and uTime2 != '' and uTime2 != null ">-->
<!--                and userregtime between #{uTime1} and #{uTime2}-->
<!--            </if>-->
<!--        </where>-->
<!--        limit #{page},#{limit}-->
<!--    </select>-->

<!--    &lt;!&ndash;    用户管理信息表,查询记录条数&ndash;&gt;-->
<!--    <select id="findUserInfoCount" resultType="java.lang.Long"-->
<!--            parameterType="com.example.papersmagboot.javabean.UserPage">-->
<!--        select count(*) from usertable-->
<!--        <where>-->
<!--            <if test="uName != '' and uName != null ">-->
<!--                and username like CONCAT('%',#{uName},'%')-->
<!--            </if>-->
<!--            <if test="uSex != '' and uSex != null ">-->
<!--                and usersex = #{uSex}-->
<!--            </if>-->
<!--            <if test="uStatus != '' and uStatus != null ">-->
<!--                and userstatus = #{uStatus}-->
<!--            </if>-->
<!--            <if test="uTime1 != '' and uTime1 != null and uTime2 != '' and uTime2 != null ">-->
<!--                and userregtime between #{uTime1} and #{uTime2}-->
<!--            </if>-->

<!--        </where>-->
<!--    </select>-->

<!--    <update id="updateUserStatus" parameterType="com.example.papersmagboot.javabean.UserTable">-->
<!--        update usertable-->
<!--        <trim prefix="set" suffixOverrides=",">-->
<!--            <if test="userstatus != null ">userstatus = #{userstatus},</if>-->
<!--        </trim>-->
<!--        <where>-->
<!--            userid = #{userid}-->
<!--        </where>-->
<!--    </update>-->

<!--    <update id="updateUserInfo" parameterType="com.example.papersmagboot.javabean.UserTable">-->
<!--        update usertable-->
<!--        <trim prefix="set" suffixOverrides=",">-->
<!--            <if test="username != null ">username = #{username},</if>-->
<!--            <if test="userphone != null ">userphone = #{userphone},</if>-->
<!--            <if test="useremail != null ">useremail = #{useremail},</if>-->
<!--        </trim>-->
<!--        <where>-->
<!--            userid = #{userid}-->
<!--        </where>-->
<!--    </update>-->

<!--    <update id="deleteUser" parameterType="java.lang.String">-->
<!--        UPDATE usertable SET userstatus = '已删除' where userid = #{userid};-->
<!--    </update>-->


<!--    &lt;!&ndash;    查找用户信息&ndash;&gt;-->
<!--    <select id="findAllUserInfo" resultType="com.example.papersmagboot.javabean.UserTable" parameterType="java.lang.Integer">-->
<!--                select * from usertable where userid = #{userid}-->
<!--            </select>-->

<!--    &lt;!&ndash;    查找用户积分信息&ndash;&gt;-->
<!--    <select id="findUserScore" resultType="java.lang.Integer" parameterType="java.lang.Integer">-->
<!--                select userscore from usertable where userid = #{userid}-->
<!--            </select>-->

<!--    <update id="updateUserScore" parameterType="com.example.papersmagboot.javabean.UserTable">-->
<!--        update usertable-->
<!--        <trim prefix="set" suffixOverrides=",">-->
<!--            <if test="userscore != null ">userscore = #{userscore},</if>-->
<!--        </trim>-->
<!--        <where>-->
<!--            userid = #{userid}-->
<!--        </where>-->
<!--    </update>-->

<!--&lt;!&ndash;    用户文档查询&ndash;&gt;-->

<!--    <select id="findUserFile" resultMap="FileMap" parameterType="com.example.papersmagboot.javabean.UserFilePage">-->
<!--        select f1.fileid,f1.filename,f1.filesize,f1.filetime,f1.fileintegral,f1.fileuploadnum,f2.typename,f1.filestatus from filetable f1 left join filetypetable f2 on f1.ftid = f2.typeid-->
<!--        <where>-->
<!--            <if test="fileopname != '' and fileopname != null ">-->
<!--                and f1.fileopname = #{fileopname}-->
<!--            </if>-->

<!--            <if test="fileType != '' and fileType != null ">-->
<!--                and f1.ftid = #{fileType}-->
<!--            </if>-->

<!--            <if test="filestatus != '' and filestatus != null ">-->
<!--                and f1.filestatus = #{filestatus}-->
<!--            </if>-->

<!--            <if test="fileTime1 != '' and fileTime1 != null and fileTime2 != '' and fileTime2 != null ">-->
<!--                and f1.filetime between #{fileTime1} and #{fileTime2}-->
<!--            </if>-->

<!--        </where>-->
<!--        limit #{page},#{limit}-->
<!--    </select>-->


<!--    &lt;!&ndash;    用户文档查询,查询记录条数&ndash;&gt;-->
<!--    <select id="findUserFileInfoCount" resultType="java.lang.Long" parameterType="com.example.papersmagboot.javabean.UserFilePage">-->
<!--        select count(*) from filetable f1 left join filetypetable f2 on f1.ftid = f2.typeid-->
<!--        <where>-->

<!--            <if test="fileopname != '' and fileopname != null ">-->
<!--                and f1.fileopname = #{fileopname}-->
<!--            </if>-->


<!--            <if test="fileType != '' and fileType != null ">-->
<!--                and f1.ftid = #{fileType}-->
<!--            </if>-->

<!--            <if test="filestatus != '' and filestatus != null ">-->
<!--                and f1.filestatus = #{filestatus}-->
<!--            </if>-->

<!--            <if test="fileTime1 != '' and fileTime1 != null and fileTime2 != '' and fileTime2 != null ">-->
<!--                and f1.filetime between #{fileTime1} and #{fileTime2}-->
<!--            </if>-->
<!--        </where>-->
<!--    </select>-->

<!--    &lt;!&ndash;    积分表收入支出表添加&ndash;&gt;-->
<!--    <insert id="addIntegral" parameterType="java.util.List">-->
<!--        insert into-->
<!--        integraltable(integraltype,integralnum,integraltime,uid)-->
<!--        values-->
<!--        <foreach collection="list" item="i" index="index" separator=",">-->
<!--            (#{i.integraltype},#{i.integralnum},#{i.integraltime},#{i.uid})-->
<!--        </foreach>-->
<!--    </insert>-->

<!--&lt;!&ndash;    用户积分收支记录查询&ndash;&gt;-->
<!--    <resultMap id="IntegralMap" type="com.example.papersmagboot.javabean.UserIntegral">-->
<!--        <result column="integralid" property="integralid"></result>-->
<!--        <result column="integraltype" property="integraltype"></result>-->
<!--        <result column="integralnum" property="integralnum"></result>-->
<!--        <result column="integraltime" property="integraltime"></result>-->
<!--        <result column="username" property="username"></result>-->
<!--        <association property="userTable" javaType="com.example.papersmagboot.javabean.UserTable">-->
<!--            <id property="userid" column="userid"/>-->
<!--            <result property="username" column="username"/>-->
<!--        </association>-->
<!--    </resultMap>-->

<!--    <select id="showUserIntegralInfo" resultMap="IntegralMap" parameterType="com.example.papersmagboot.javabean.UserIntegralPage">-->
<!--        select in1.integralid,in1.integraltype,in1.integralnum,in1.integraltime,u.username from integraltable in1 left join usertable u on in1.uid = u.userid limit #{page},#{limit}-->
<!--    </select>-->

<!--    &lt;!&ndash;    用户积分收支记录查询记录条数&ndash;&gt;-->
<!--    <select id="showUserIntegralInfoCount" resultType="java.lang.Long" parameterType="com.example.papersmagboot.javabean.UserIntegralPage">-->
<!--        select count(*) from integraltable in1 left join usertable u on in1.uid = u.userid-->
<!--    </select>-->




</mapper>